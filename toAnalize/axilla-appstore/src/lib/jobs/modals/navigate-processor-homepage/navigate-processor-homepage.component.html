<div class="modal-header">
  <h3 class="modal-title">
    <span translation="Axilla.App.PED.Form.ProcessNavigation" source="AxillaAppBase"></span>
  </h3>
  <span>
    <p-button icon="pi pi-home" (click)="goHome()"></p-button>
    <button type="button" class="close" [attr.aria-label]="l('Close')" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
  </span>
</div>

<div class="modal-body" style="position: relative; width: 100%; height: 500px; overflow: hidden;">
  <div class="canvas"
       style="width: 100%; height: 100%; position: relative; cursor: grab;"
       [style.transform]="'scale(' + canvasInteractions.zoomFactor + ') translate(' + canvasInteractions.translateX + 'px, ' + canvasInteractions.translateY + 'px)'"
       [style.transformOrigin]="'center center'"
       (mousedown)="startPan($event)"
       (mousemove)="pan($event)"
       (mouseup)="stopPan()"
       (mouseleave)="stopPan()">

    <!-- Add an SVG for lines -->
    <svg class="lines-layer"
         xmlns="http://www.w3.org/2000/svg"
         width="100%"
         height="100%"
         style="position: absolute; z-index: 1;">
      <!-- Lines connector -->
      <line *ngFor="let line of _navigationProcessorService.lines"
            [attr.x1]="line.from.X"
            [attr.y1]="line.from.Y"
            [attr.x2]="line.to.X"
            [attr.y2]="line.to.Y"
            stroke="black"
            stroke-width="2" />
    </svg>

    <div *ngFor="let node of _navigationProcessorService.nodes"
         class="node"
         [id]="'node-' + node.uid"
         [style.left.px]="node.x"
         [style.top.px]="node.y"
         [style.width.px]="node.w"
         [style.height.px]="node.h"
         style="position: absolute; z-index: 2;">
      <div class="node-header"
           (mousedown)="startDrag(node, $event)">
        <span class="node-title">{{ node.title }}</span>
        <span class="node-close" (click)="closeNode(node)">X</span>
      </div>

      <div class="node-content">
        <div class="node-info">
          <div class="node-direction">
            <div class="arrow" [class.active]=" node.output ">
              &#x25B2; <!-- Up arrow -->
            </div>
            <div class="arrow" [class.active]=" node.input ">
              &#x25BC; <!-- Down arrow -->
            </div>
          </div>
          <div class="node-type">{{ node.type }}</div>
        </div>
        <div class="node-description">{{ node.description }}</div>
      </div>

      <!-- Icon bar -->
      <div class="icon-bar" style="text-align: right;">
        <span *ngIf="node.type === 'VDB' || node.type === 'Processor'" class="arrow-right navigate-icon"  (click)="navigateToVDB(node, $event)">
          &#x25B6; <!-- Right arrow -->
        </span>
      </div>

      <!-- Hotspot: Left -->
      <navigation-hotspot [node]="node"
                          [direction]="'right'">
      </navigation-hotspot>
      <!-- Hotspot: Left -->
      <navigation-hotspot [node]="node"
                          [direction]="'left'">
      </navigation-hotspot>
      <!-- Hotspot: Left -->
      <navigation-hotspot [node]="node"
                          [direction]="'top'">
      </navigation-hotspot>

      <!-- Hotspot: Left -->
      <navigation-hotspot [node]="node"
                          [direction]="'bottom'">
      </navigation-hotspot>


    </div>

  </div>

  <!-- Bottom-right corner display -->
  <div class="info-overlay">
    Center: ({{ canvasInteractions.translateX }}, {{ canvasInteractions.translateY }}) | Zoom: {{ canvasInteractions.zoomFactor }}x
  </div>

  <!-- Zoom controls -->
  <div class="zoom-controls" style="position: absolute; top: 10px; right: 10px;">
    <button class="zoom-button" (click)="updateZoomFactor(canvasInteractions.zoomFactor + 0.1)">
      <i class="pi pi-search-plus"></i>
    </button>
    <button class="zoom-button" (click)="updateZoomFactor(canvasInteractions.zoomFactor - 0.1)">
      <i class="pi pi-search-minus"></i>
    </button>
  </div>
</div>




