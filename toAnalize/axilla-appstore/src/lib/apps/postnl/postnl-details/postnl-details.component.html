<div [@routerTransition]>


    <div style="padding: 0.571em 1em;">
        <div class="kt-subheader kt-grid__item">
            <div class="kt-subheader__main">
                <h3 class="kt-subheader__title">
                    <span translation="Axilla.Menu.PostNL" source="AxillaAppPostNL"></span>: {{sourceName}}
                </h3>

            </div>
            <div class="kt-subheader__toolbar">
            </div>
        </div>
        <div class="row align-items-center position-relative">
            <div class="col primeng-datatable-container">
                <p-table #dataTable
                         [value]="databaseTableHelper.records"
                         rows="{{databaseTableHelper.defaultRecordsCountPerPage}}"
                         [paginator]="false"
                         [responsive]="databaseTableHelper.isResponsive">
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th pSortableColumn="Key" style="width: 150px">
                                <span translation="Axilla.App.PostNL.DatabaseKey" source="AxillaAppPostNL"></span>
                                <p-sortIcon field="Key"></p-sortIcon>
                            </th>
                            <th pSortableColumn="Value">
                                <span translation="Axilla.App.PostNL.DatabaseValue" source="AxillaAppPostNL"></span>
                                <p-sortIcon field="Value"></p-sortIcon>
                            </th>
                            <th style="width: 270px">
                                <span translation="Axilla.App.PostNL.Actions" source="AxillaAppPostNL"></span>
                            </th>
                        </tr>
                        <tr [formGroup]="databaseForm">
                            <td>
                                <input name="key"
                                       formControlName="key"
                                       class="form-control kt-input" [placeholder]="l('SearchWithThreeDot')"
                                       (ngModelChange)="search()" type="text">
                            </td>
                            <td>
                            </td>
                            <td>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-columns="columns" let-record="$implicit">
                        <tr [pSelectableRow]="record">
                            <td>
                                {{record.key}}
                            </td>
                            <td>
                                <div class="d-flex flex-column">
                                    <div *ngIf="openedItem!=record.key" class="value-overflown">
                                        <div>
                                            {{getAddress(record.value)}}
                                        </div>
                                        <div>
                                            {{getBarcodes(record.value)}}
                                        </div>
                                    </div>
                                    <div *ngIf="checkIfContainsError(record)" class="postnl-error-container">
                                        {{getError(record)}}
                                    </div>
                                </div>
                            </td>
                            <td>
                                <ng-container>
                                    <div class="d-flex flex-row" style="gap: 5px;">
                                        <button type="button"
                                                [buttonBusy]="record.disableBtn"
                                                [busyText]="startingProcessorLabel"
                                                [disabled]="record.disableBtn || errorDetector(1, record)"
                                                class="btn btn-secondary lable-print-1"
                                                [ngClass]="{'ubl-mint-leaf': 1 <= record.printedLabel && !errorDetector(1, record), 'ubl-pink-glamour': errorDetector(1, record)}"
                                                (click)="startProcessor(record,1)">
                                            1
                                        </button>
                                        <div class="d-flex flex-column" style="gap: 5px;">
                                            <div class="d-flex flex-row">

                                                <button type="button"
                                                        [buttonBusy]="record.disableBtn"
                                                        [busyText]="startingProcessorLabel"
                                                        [disabled]="record.disableBtn || errorDetector(2, record)"
                                                        class="btn btn-secondary lable-print-default"
                                                        [ngClass]="{'ubl-mint-leaf': 2 <= record.printedLabel && !errorDetector(2, record), 'ubl-pink-glamour': errorDetector(2, record)}"
                                                        (click)="startProcessor(record,2)">
                                                    2
                                                </button>
                                                <button type="button"
                                                        [buttonBusy]="record.disableBtn"
                                                        [busyText]="startingProcessorLabel"
                                                        [disabled]="record.disableBtn || errorDetector(3, record)"
                                                        class="btn btn-secondary lable-print-default"
                                                        [ngClass]="{'ubl-mint-leaf': 3 <= record.printedLabel && !errorDetector(3, record), 'ubl-pink-glamour': errorDetector(3, record)}"
                                                        (click)="startProcessor(record,3)">
                                                    3
                                                </button>

                                            </div>
                                            <div class="d-flex flex-row">
                                                <button type="button"
                                                        [buttonBusy]="record.disableBtn"
                                                        [busyText]="startingProcessorLabel"
                                                        [disabled]="record.disableBtn || errorDetector(4, record)"
                                                        class="btn btn-secondary lable-print-default"
                                                        [ngClass]="{'ubl-mint-leaf': 4 <= record.printedLabel && !errorDetector(4, record), 'ubl-pink-glamour': errorDetector(4, record)}"
                                                        (click)="startProcessor(record,4)">
                                                    4
                                                </button>
                                                <button type="button"
                                                        [buttonBusy]="record.disableBtn"
                                                        [busyText]="startingProcessorLabel"
                                                        [disabled]="record.disableBtn || errorDetector(5, record)"
                                                        class="btn btn-secondary lable-print-default"
                                                        [ngClass]="{'ubl-mint-leaf': 5 <= record.printedLabel && !errorDetector(5, record), 'ubl-pink-glamour': errorDetector(5, record)}"
                                                        (click)="startProcessor(record,5)">
                                                    5
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>
                                <!--<ng-container *ngIf="record.shipmentAvailable">
                                    <ng-container *ngIf="checkIfContainsError(record)">
                                        <button type="button"
                                                [buttonBusy]="record.disableBtn"
                                                [busyText]="startingPrintingLabel"
                                                [disabled]="record.disableBtn || checkIfBtnDisabled() || checkIfContainsError(record)"
                                                class="btn btn-secondary w-100"
                                                (click)="printShipmentInfo(record)">
                                            Start printing
                                        </button>
                                    </ng-container>
                                    <ng-container *ngIf="!checkIfContainsError(record)">
                                        <button type="button"
                                                [buttonBusy]="record.disableBtn"
                                                [busyText]="startingPrintingLabel"
                                                [disabled]="record.disableBtn || checkIfBtnDisabled()"
                                                class="btn btn-secondary w-100"
                                                (click)="printShipmentInfo(record)">
                                            Start printing
                                        </button>
                                    </ng-container>
                                </ng-container>-->
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
                <div class="primeng-no-data" *ngIf="databaseTableHelper.totalRecordsCount == 0 && !databaseTableHelper.isLoading">
                    <span translation="Axilla.NoData" source="Axilla"></span>
                </div>
                <div class="primeng-no-data" *ngIf="databaseTableHelper.isLoading">
                    <span translation="Axilla.LoadingData" source="Axilla"></span>
                </div>
                <div class="primeng-paging-container">
                    <p-paginator [rows]="databaseTableHelper.defaultRecordsCountPerPage"
                                 #paginator
                                 (onPageChange)="getVDBRowsOnPagination($event)"
                                 [totalRecords]="databaseTableHelper.totalRecordsCount">
                    </p-paginator>
                    <span class="total-records-count">
                        {{'TotalRecordsCount' | localize:databaseTableHelper.totalRecordsCount}}
                    </span>
                </div>
                <div class="spinner-container" *ngIf="databaseTableHelper.isLoading">
                    <p-progressSpinner></p-progressSpinner>
                </div>
            </div>
        </div>
    </div>
</div>
<!--<app-postnl-change-amount-modal #postnlModal (startProcessor)="startProcessor($event)"></app-postnl-change-amount-modal>-->
