<div [@routerTransition]>
  <div class="kt-subheader kt-grid__item">
    <div class="kt-subheader__main">
      <h3 class="kt-subheader__title">
        <span>{{"Axilla.Menu.AIImageDescription" | localize }}</span>
      </h3>

    </div>
    <div class="kt-subheader__toolbar">

      <!-- Image Upload Button -->
      <label class="image-upload m-0" (click)="toggleFileUpload()">
        <span class="material-symbols-outlined lpc-icon">image_search</span>
      </label>

      <button
        type="submit"
        class="btn btn-success"
        (click)="describe()">
        <i class="fa fa-plus"></i>
        <span translation="Axilla.App.AIImageDescription.DescribeImage" source="AxillaAppBase"></span>
      </button>
    </div>
  </div>

  <div class="kt-content">
    <div class="kt-portlet">
      <div class="kt-portlet__body">
        <div class="row align-items-center">
          <div class="col primeng-datatable-container">

<!--            <ng-container *ngIf="!lastAssignmentId && !openedValue ">-->
<!--              <div>-->
<!--                Please set new assignment, Use Set Assignment btn.-->
<!--              </div>-->
<!--            </ng-container>-->

<!--            <ng-container *ngIf="lastAssignmentId && isLoading">-->
<!--              <div class="spinner-container" *ngIf="isLoading">-->
<!--                <p-progressSpinner></p-progressSpinner>-->
<!--              </div>-->
<!--            </ng-container>-->

<!--            <ng-container *ngIf="openedValue">-->
<!--              <json-editor #editor-->
<!--                           [options]="editorOptions"-->
<!--                           [data]="openedValue"-->
<!--                           class="text-editor"></json-editor>-->
<!--            </ng-container>-->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<div class="image-upload-popup"
     *ngIf="isFileUploadOpened"
     (dragover)="onDragOver($event)"
     (dragleave)="onDragLeave()"
     (drop)="onDrop($event)">

  <div class="upload-popup-header d-flex align-items-center justify-content-between">
    <div  class="d-flex align-items-center p-justify-start">
      <!-- Search Icon -->
<!--      <i class="pi pi-search" *ngIf="!searchValue" (click)="focusInput()"></i>-->
      <span>{{ 'Axilla.App.EnterpriseSearch.ImageSearch' | localize }}</span>
    </div>
    <!-- Close Input Button -->
    <i class="pi pi-times" (click)="closeFileDialog()"></i>
  </div>

  <div class="drop-area"
       [class.hovered]="isHovering">
    <p-progressSpinner *ngIf="startPictureLoading; else defaultPictureLoader"></p-progressSpinner>

    <ng-template #defaultPictureLoader>
      <span class="material-symbols-outlined es-photo">photo</span>
      <p>Drag an image here or <span class="upload-link" (click)="openFileDialog()">upload</span></p>
      <input type="file" #fileInput accept=".jpg, .png, .tiff, .webp" (change)="onImageSelected($event)" hidden />
    </ng-template>

  </div>

  <!-- Error Message -->
  <div *ngIf="uploadError" class="error-message">
    Upload failed. Supported filetypes: .jpg, .png, .tiff or .webp
  </div>

</div>
