<div [@routerTransition]>
  <div class="kt-subheader kt-grid__item">
    <div class="kt-subheader__main">
      <h3 class="kt-subheader__title">
        <span>{{"Axilla.Menu.VDB" | localize | localizeAxilla}}</span>
      </h3>
    </div>

    <div class="kt-subheader__toolbar"></div>

    <div class="kt-subheader__toolbar">
      <div class="kt-subheader__wrapper">
        <button class="btn btn-primary"
                (click)="createNewVDB()">
          <i class="fa fa-plus"></i>{{"Axilla.Apps.VDB.CreateNewVDB" | localizeAxillaAppVDB}}
        </button>
      </div>
    </div>
  </div>

  <div class="kt-content">
    <div class="kt-portlet">
      <div class="kt-portlet__body">
        <div class="row align-items-center">
          <div class="col primeng-datatable-container">
            <p-table #dataTable
                     [value]="databaseTableHelper.records"
                     [rows]="databaseTableHelper.defaultRecordsCountPerPage"
                     [paginator]="false"
                     [responsive]="databaseTableHelper.isResponsive">
              <ng-template pTemplate="header" let-columns>
                <tr>
                  <th pSortableColumn="name">
                    <span translation="Axilla.Apps.VDB.DatabaseName" source="AxillaAppVDB"></span>
                    <p-sortIcon field="name"></p-sortIcon>
                  </th>
                </tr>
                <tr [formGroup]="databaseForm">
                  <td>
                    <input name="name"
                           formControlName="name"
                           class="m-0 form-control kt-input" [placeholder]="l('SearchWithThreeDot')"
                           (ngModelChange)="getDatabasesOnPagination($event)" type="text">
                  </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-columns="columns" let-record="$implicit">
                <tr [pSelectableRow]="record">
                  <td (click)="openDatabase(record.name)">
                    <span class="p-column-title">
                      <span translation="Axilla.VDB.DatabaseName" source="AxillaAppVDB"></span>
                    </span>
                    {{record.name}}
                  </td>
                </tr>
              </ng-template>
            </p-table>
            <div class="primeng-no-data" *ngIf="databaseTableHelper.totalRecordsCount === 0 && !databaseTableHelper.isLoading">
              <span translation="Axilla.NoData" source="Axilla"></span>
            </div>
            <div class="primeng-no-data" *ngIf="databaseTableHelper.isLoading">
              <span translation="Axilla.LoadingData" source="Axilla"></span>
            </div>
            <div class="primeng-paging-container">
              <p-paginator [rows]="databaseTableHelper.defaultRecordsCountPerPage"
                           #paginator
                           (onPageChange)="getDatabasesOnPagination($event)"
                           [totalRecords]="databaseTableHelper.totalRecordsCount">
              </p-paginator>
              <span class="total-records-count">
                {{'TotalRecordsCount' | localize:databaseTableHelper.totalRecordsCount}}
              </span>
            </div>
            <div class="spinner-container" *ngIf="databaseTableHelper.isLoading">
              <p-progressSpinner></p-progressSpinner>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
